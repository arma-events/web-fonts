# Web Fonts for arma.events

This package includes all web fonts used in arma.events and related projects. Each font is segmented in multiple unicode ranges so that a browser only needs to download the font resource needed for the displayed text content.
Furthermore each font is accompanied by a fallback font that should be displayed while the resources are loading. It is a font that is locally available on most systems and is adjusted to match the size of the target font as closely as possible to reduce layout shift.

## Installation

```
npm i @arma-events/web-fonts
```

> [!IMPORTANT]
> Make sure the `.npmrc` file in your project correctly configures the GitHub package registry for the `@arma-events/`-namespace:
>
> ```
> # .npmrc
> @arma-events:registry=https://npm.pkg.github.com
> ```

## Usage

Simply include the css file, which includes font-faces for all font as well as their fallback fonts:

```css
@import '@arma-events/web-fonts/dist/index.css';

/* Use the font */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: 'Raleway', 'Raleway Fallback', sans-serif; /* Make sure to include the fallback font to reduce layout shift */
}
```

## Contributing

### Building locally

> [!TIP]  
> [NodeJS 20 or higher](https://nodejs.org/) is required.

To build the package locally, simply install all dependencies:

```sh
npm ci
```

then run the build script:

```sh
npm run build
```

### Directory structure

#### `build/`

This directory contains the scripts used to build the package. They takes care of:

- Generating all `woff2` files from the input `tff`
- Automatically generating [`@font faces`](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face) rules for all fallback fonts
- Generating the output scss and css files.

#### `fallback_fonts/`

This directory contains all TrueType Fonts, that can be used as a fallback. These fonts are not included in the output and are just used to calculate the override values ([`size-adjust`](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/size-adjust), [`ascent-override`](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/ascent-override), [`descent-override`](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/descent-override) and [`line-gap-override`](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/line-gap-override)).

> [!NOTE]
> Fonts in this directory should be ["web-safe"](https://www.cssfontstack.com/) (generally available locally on most people's (> 70%) systems)

#### `fonts/`

This directory contains all fonts that should be built. Each font has a subdirectory and must includes the following five files:

- `normal.ttf`: The [variable font](https://fonts.google.com/knowledge/introducing_type/introducing_variable_fonts) in the normal style
- `italic.ttf`: The [variable font](https://fonts.google.com/knowledge/introducing_type/introducing_variable_fonts) in the italic style
- `static/normal.ttf`: The static font in the normal style and regular weight _(is only used to calculate the overrides of the fallback font)_
- `static/italic.ttf`: The static font in the italic style and regular weight _(is only used to calculate the overrides of the fallback font)_
- `config.json`: The configuration for the font. Includes an object, which has to have the following properties:
  | Key | Example | Description |
  | --- | --- | --- |
  | `weight` | `200 900` | Value to set for [`font-weight`](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-weight) in the [`@font-face` at-rule](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face) |
  | `fallbackFontFamily` | `Trebuchet MS` | Name of the fallback font family to use. `" Italic"` is automatically appended for the italic style. See the `fallback_fonts/`-directory for possible values. |

#### `_template.scss`

This file includes all the logic to generate the output scss and css files. It is loaded in the `index.scss`, which is auto generated by the build script. But the `index.scss` does not include any logic. It just loads the `_template.scss` with the correct values for base path, unicode ranges, fonts as well as font weights.

#### `unicode_ranges.json`

This JSON file includes all unicode ranges, that should be built. It's contains a simple object with the key being the name and the value being a valid [unicode range](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range#values).
